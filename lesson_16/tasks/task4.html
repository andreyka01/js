<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../сss/style.css" />
    <title>Task 4</title>
    <script>
      // Задача 4. Створити клас TBankomat, який моделює роботу банкомата.
      // Клас повинен містити поля для зберігання кількості купюр кожного із
      // номіналів від 5 до 200 гривень. Реалізувати методи знаходження
      // максимальної та мінімальної сум, які може видати банкомат, та метод
      // зняття деякої суми.

      class TBankomat {
        constructor(banknotes) {
          this.banknotes = banknotes;
        }
        getMin() {
          return this.banknotes.reduce(
            (min, banknote) =>
              min > banknote.value ? (min = banknote.value) : min,
            Infinity
          );
        }
        getMax() {
          return this.banknotes.reduce(
            (prevSum, banknote) => prevSum + banknote.value * banknote.quantity,
            0
          );
        }
        getMoney(moneyValue) {
          let maxSum = this.getMax();
          if (moneyValue > maxSum) {
            throw new Error("Помилка! Не достатньо грошей в банкоматі!");
          } else if (moneyValue % 5 === 0) {
            maxSum -= moneyValue;
            alert("Операція успішна!");
            console.log(maxSum);
          } else throw new Error("Помилка! Неможливо видати кошти!");
        }
      }

      class Banknote {
        constructor(value, quantity) {
          this.value = value;
          this.quantity = quantity;
        }
      }

      let banknotes = [
        new Banknote(5, 100),
        new Banknote(10, 100),
        new Banknote(20, 100),
        new Banknote(50, 100),
        new Banknote(100, 100),
        new Banknote(200, 100),
      ];

      let bankomat = new TBankomat(banknotes);
      console.log(bankomat);
      console.log(bankomat.getMin());
      console.log(bankomat.getMax());

      let userWithdrawMoney = parseInt(prompt("Введіть суму для зняття"));
      bankomat.getMoney(userWithdrawMoney);
    </script>
  </head>
  <body>
    <div class="wrapper">
      <header class="header"></header>
      <main class="block">
        <div class="block__task task">
          <h2 class="tast__name">
            Задача 4. Створити клас TBankomat, який моделює роботу банкомата.
            Клас повинен містити поля для зберігання кількості купюр кожного із
            номіналів від 5 до 200 гривень. Реалізувати методи знаходження
            максимальної та мінімальної сум, які може видати банкомат, та метод
            зняття деякої суми.
          </h2>
        </div>
      </main>
      <footer class="footer"></footer>
    </div>
  </body>
</html>
